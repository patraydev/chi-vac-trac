#all praises be to:
#https://github.com/marketplace/actions/fetch-api-data

name: Gather API Data
 
on:
  schedule:
    - cron: '0 10 * * *' 
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2
        with:
          persist-credentials: false
      - name: Fetch API Data ğŸ“¦
        uses: JamesIves/fetch-api-data-action@releases/v1
        with:
          ENDPOINT: https://data.cityofchicago.org/resource/553k-3xzc.json
          CONFIGURATION: '{ "method": "GET" }'
      - name: Build and Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@releases/v3
        with:
          BRANCH: main # Pushes the updates to the master branch.
          FOLDER: fetch-api-data-action # The location of the data.json file saved by the Fetch API Data action.
          TARGET_FOLDER: data # Saves the data into the 'data' directory on the master branch.
